- hosts: all
  tasks:
  - name: Ansible delete files older than 5m example
    find:
      paths: /tmp/
      # pode ser usado 1d | 1h | 1m | 1s
      age: 5m
    register: files_to_delete

  - name: Ansible remove files older than a date example
    file:
      path: "{{ item.path }}"
      state: absent
    with_items: "{{ files_to_delete.files }}"

  - name: test shell with exit 1
    become: no
    shell: |
    echo "This command will delete all files in /tmp/* folder"
    rm -f /tmp/  # This should be an error.
    echo "test2"
    #exit 1        # this stops ansible due to returning an error
    echo "test1"
    echo "test3" # success